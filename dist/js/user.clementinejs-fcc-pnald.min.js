/*! clementinejs-fcc-pnald 27-07-2017 */

var appUrl=window.location.origin,ajaxFunctions={ready:function(e){if("function"==typeof e)return"complete"===document.readyState?e():void document.addEventListener("DOMContentLoaded",e,!1)},ajaxRequest:function(e,t,a){"use strict";var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status&&a(n.response)},n.open(e,t,!0),n.send()}};!function(){"use strict";function e(e){null!=o&&("login"==e&&(o.innerHTML='<form action="/auth/local" method="post">\t<h3>LOGIN LOCAL USER</h3>\t<div class="form-group">\t<div>\t<label>Username:</label>\t<input type="text" name="username"class="form-control" placeholder="Username or Email"/><br/>\t</div>\t<div>\t<label>Password:</label>\t<input type="password" name="password" class="form-control" placeholder="Password"/>\t</div>\t</div>\t<br>\t<div class="form-group">\t<div>\t<input type="submit" class="btn btn-primary" value="Submit"/>\t</div>\t</div></form>'),"create"==e&&(o.innerHTML='<form action="/auth/localnew" method="post">\t<h3>CREATE LOCAL USER</h3>\t<div class="form-group">\t<div>\t<label>Username:</label>\t<input type="text" name="username"class="form-control" placeholder="Username or Email"/><br/>\t</div>\t<div>\t<label>Display Name:</label>\t<input type="text" name="display"class="form-control" placeholder="Display Name"/><br/>\t</div>\t<div>\t<label>Password:</label>\t<input type="password" name="password" class="form-control" placeholder="Password"/>\t</div>\t</div>\t<br>\t<div class="form-group">\t<div>\t<input type="submit" class="btn btn-primary" value="Submit"/>\t</div>\t</div></form>'),"reset"==e&&(o.innerHTML='<p>Only valid if your username is a valid email!</p><br> Username:<input type="text" name="name" id="resetusername" class="form-control" placeholder="Email"><br>  <button type="submit" class="btn btn-add btn-primary" id ="resetaction">Reset!</button>'))}function t(e){if(null!=e&&void 0!=e){var t=JSON.parse(e);null!=t.message&&void 0!=t.message&&(s.innerHTML='<div class="'+t.type+'"><h2>'+t.message+"</h2></div>")}}var a=document.querySelector("#login")||null,n=document.querySelector("#create")||null,r=document.querySelector("#reset")||null,o=document.querySelector("#authform")||null,s=document.querySelector("#message")||null,l=appUrl+"/auth/localnew";ajaxFunctions.ready(ajaxFunctions.ajaxRequest("GET",l,e("login"))),null!=a&&a.addEventListener("click",function(){ajaxFunctions.ajaxRequest("GET",l,e("login"))},!1),null!=n&&n.addEventListener("click",function(){ajaxFunctions.ajaxRequest("GET",l,e("create"))},!1),null!=r&&r.addEventListener("click",function(){ajaxFunctions.ajaxRequest("GET",l,e("reset")),document.querySelector("#resetaction").addEventListener("click",function(){var a=document.querySelector("#resetusername").value;ajaxFunctions.ajaxRequest("POST",l+"reset?name="+a,function(){ajaxFunctions.ajaxRequest("GET",l+"message",t),ajaxFunctions.ajaxRequest("GET",l,e("login"))})})},!1)}();